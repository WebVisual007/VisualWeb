<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Constructor de Sitios Web</title>
  <!-- Algunos Google Fonts de ejemplo (puedes incorporar más según lo necesites) -->
  <link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans|Lato|Montserrat|Raleway" rel="stylesheet">
  <style>
    /* Estilos generales */
    body {
      margin: 0;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      padding: 10px;
      background: #333;
      color: white;
      text-align: center;
    }
    main {
      flex: 1;
      display: flex;
      overflow: hidden;
    }
    aside#toolbox {
      width: 300px;
      background: #f4f4f4;
      padding: 10px;
      overflow-y: auto;
      border-right: 1px solid #ccc;
    }
    #workspace {
      flex: 1;
      border: 1px dashed #ccc;
      margin: 10px;
      position: relative;
      overflow: auto;
      background: #fff;
    }
    /* Cada elemento agregado al espacio */
    .element {
      position: absolute;
      cursor: move;
      border: 1px solid #ddd;
      padding: 5px;
      background: rgba(255,255,255,0.8);
    }
    /* Botón fijo para generar código */
    #generateCodeBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: yellow;
      color: black;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      z-index: 1000;
    }
    /* Paneles adicionales en la sidebar */
    .control-panel {
      margin-top: 20px;
      border-top: 1px solid #ccc;
      padding-top: 10px;
    }
    .control-panel h2 {
      margin-bottom: 5px;
    }
    .hidden {
      display: none;
    }
    /* Estilos para el cuaderno */
    .notebook {
      margin: 10px;
      border: 2px solid #666;
      padding: 20px;
      background: #fafafa;
    }
    .notebook.circular {
      border-radius: 50%;
    }
    /* Botón personalizado */
    .custom-button {
      padding: 10px 15px;
      border: none;
      cursor: move;
      margin: 5px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Constructor de Sitios Web</h1>
  </header>
  <main>
    <aside id="toolbox">
      <!-- Herramienta para agregar texto -->
      <div id="textTool">
        <h2>Texto</h2>
        <input type="text" id="textContent" placeholder="Contenido del texto">
        <br>
        <select id="textType">
          <option value="h1">Título (H1)</option>
          <option value="h2">Subtítulo (H2)</option>
          <option value="p">Párrafo</option>
        </select>
        <br>
        <label for="fontSelect">Fuente:</label>
        <select id="fontSelect">
          <!-- 50 opciones de fuentes -->
          <option value="Arial">Arial</option>
          <option value="Helvetica">Helvetica</option>
          <option value="Times New Roman">Times New Roman</option>
          <option value="Courier New">Courier New</option>
          <option value="Verdana">Verdana</option>
          <option value="Georgia">Georgia</option>
          <option value="Palatino">Palatino</option>
          <option value="Garamond">Garamond</option>
          <option value="Bookman">Bookman</option>
          <option value="Comic Sans MS">Comic Sans MS</option>
          <option value="Impact">Impact</option>
          <option value="Lucida Sans">Lucida Sans</option>
          <option value="Tahoma">Tahoma</option>
          <option value="Trebuchet MS">Trebuchet MS</option>
          <option value="Lucida Console">Lucida Console</option>
          <option value="Monaco">Monaco</option>
          <option value="Calibri">Calibri</option>
          <option value="Candara">Candara</option>
          <option value="Consolas">Consolas</option>
          <option value="Segoe UI">Segoe UI</option>
          <option value="Franklin Gothic">Franklin Gothic</option>
          <option value="Gill Sans">Gill Sans</option>
          <option value="Century Gothic">Century Gothic</option>
          <option value="Baskerville">Baskerville</option>
          <option value="Didot">Didot</option>
          <option value="Rockwell">Rockwell</option>
          <option value="Arial Black">Arial Black</option>
          <option value="Comic Neue">Comic Neue</option>
          <option value="Open Sans">Open Sans</option>
          <option value="Roboto">Roboto</option>
          <option value="Lato">Lato</option>
          <option value="Montserrat">Montserrat</option>
          <option value="Raleway">Raleway</option>
          <option value="Oswald">Oswald</option>
          <option value="Merriweather">Merriweather</option>
          <option value="PT Sans">PT Sans</option>
          <option value="Source Sans Pro">Source Sans Pro</option>
          <option value="Ubuntu">Ubuntu</option>
          <option value="Noto Sans">Noto Sans</option>
          <option value="Merriweather Sans">Merriweather Sans</option>
          <option value="Playfair Display">Playfair Display</option>
          <option value="Droid Sans">Droid Sans</option>
          <option value="Josefin Sans">Josefin Sans</option>
          <option value="Anton">Anton</option>
          <option value="Barber">Barber</option>
          <option value="Bungee">Bungee</option>
          <option value="Cormorant Garamond">Cormorant Garamond</option>
          <option value="Dancing Script">Dancing Script</option>
          <option value="Futura">Futura</option>
          <option value="Franklin Gothic Medium">Franklin Gothic Medium</option>
        </select>
        <br>
        <label for="fontSize">Tamaño:</label>
        <input type="number" id="fontSize" value="24" style="width:60px;"> px
        <br>
        <label for="fontColor">Color:</label>
        <input type="color" id="fontColor" value="#000000">
        <br>
        <button onclick="addText()">Agregar Texto</button>
      </div>

      <!-- Herramienta para agregar imágenes -->
      <div id="imageTool" class="control-panel">
        <h2>Imagen</h2>
        <input type="file" id="imageInput" accept="image/*">
        <br>
        <button onclick="addImage()">Agregar Imagen</button>
      </div>

      <!-- Herramienta para agregar botones personalizados -->
      <div id="buttonTool" class="control-panel">
        <h2>Botón Personalizado</h2>
        <input type="text" id="btnText" placeholder="Texto del botón">
        <br>
        <label for="btnColor">Color:</label>
        <input type="color" id="btnColor" value="#008CBA">
        <br>
        <label for="btnWidth">Ancho:</label>
        <input type="number" id="btnWidth" value="100" style="width:60px;"> px
        <br>
        <label for="btnHeight">Alto:</label>
        <input type="number" id="btnHeight" value="40" style="width:60px;"> px
        <br>
        <label for="btnLink">Enlace:</label>
        <input type="text" id="btnLink" placeholder="http://ejemplo.com">
        <br>
        <label for="btnAnimation">Animación (CSS):</label>
        <input type="text" id="btnAnimation" placeholder="ej. bounce">
        <br>
        <button onclick="addButton()">Agregar Botón</button>
      </div>

      <!-- Herramienta para agregar el simulador de cuadernos -->
      <div id="notebookTool" class="control-panel">
        <h2>Simulador de Cuaderno</h2>
        <label for="notebookType">Tipo:</label>
        <select id="notebookType">
          <option value="square">Cuadrado</option>
          <option value="circular">Circular</option>
        </select>
        <br>
        <button onclick="addNotebook()">Agregar Cuaderno</button>
      </div>
    </aside>
    <section id="workspace">
      <!-- Aquí se agregarán todos los elementos creados -->
    </section>
  </main>

  <!-- Botón fijo para generar código -->
  <button id="generateCodeBtn" onclick="generateCode()">Generar Código</button>

  <!-- Modal para editar imágenes -->
  <div id="imageModal" class="hidden" style="position: fixed; top: 20%; left: 30%; width: 300px; background: white; border:1px solid #ccc; padding: 20px; z-index:1001;">
    <h3>Editar Imagen</h3>
    <label>Escala:</label>
    <input type="range" id="imgScale" min="0.5" max="2" step="0.1" value="1"><br>
    <label>Rotación:</label>
    <input type="range" id="imgRotate" min="0" max="360" step="5" value="0"><br>
    <label for="imgFilter">Filtro:</label>
    <select id="imgFilter">
      <option value="none">Ninguno</option>
      <option value="grayscale(100%)">Escala de grises</option>
      <option value="sepia(100%)">Sepia</option>
      <option value="brightness(150%)">Brillo</option>
      <option value="contrast(200%)">Contraste</option>
    </select>
    <br>
    <button onclick="applyImageEdits()">Aplicar</button>
    <button onclick="closeImageModal()">Cerrar</button>
  </div>

  <!-- Modal para mostrar el código generado -->
  <div id="codeModal" class="hidden" style="position: fixed; top:10%; left:10%; width:80%; height:80%; background:#fff; border:1px solid #ccc; padding:20px; overflow:auto; z-index:1001;">
    <h3>Código Generado</h3>
    <h4>HTML</h4>
    <pre id="codeHtml"></pre>
    <h4>CSS</h4>
    <pre id="codeCss"></pre>
    <h4>JavaScript</h4>
    <pre id="codeJs"></pre>
    <button onclick="closeCodeModal()">Cerrar</button>
  </div>

  <script>
    let currentImageElement = null;

    // Función para agregar texto con las opciones seleccionadas
    function addText() {
      const content = document.getElementById('textContent').value;
      const type = document.getElementById('textType').value;
      const font = document.getElementById('fontSelect').value;
      const fontSize = document.getElementById('fontSize').value;
      const color = document.getElementById('fontColor').value;
      
      if (!content) {
        alert('Por favor ingrese contenido de texto.');
        return;
      }
      const textElem = document.createElement(type);
      textElem.innerText = content;
      textElem.style.position = 'absolute';
      textElem.style.top = '10px';
      textElem.style.left = '10px';
      textElem.style.fontFamily = font;
      textElem.style.fontSize = fontSize + 'px';
      textElem.style.color = color;
      textElem.classList.add('element');
      textElem.setAttribute('draggable', true);
  
      textElem.addEventListener('dragstart', dragStart);
      textElem.addEventListener('dragend', dragEnd);
  
      document.getElementById('workspace').appendChild(textElem);
      document.getElementById('textContent').value = '';
    }
  
    // Función para agregar una imagen desde el input file
    function addImage() {
      const file = document.getElementById('imageInput').files[0];
      if (!file) {
        alert('Seleccione un archivo de imagen.');
        return;
      }
      const reader = new FileReader();
      reader.onload = function(e) {
        const img = document.createElement('img');
        img.src = e.target.result;
        img.style.position = 'absolute';
        img.style.top = '50px';
        img.style.left = '50px';
        img.style.width = '200px';
        img.style.cursor = 'pointer';
        img.classList.add('element');
  
        // Al hacer clic en la imagen se abre el modal de edición
        img.addEventListener('click', function() {
          currentImageElement = img;
          openImageModal();
        });
  
        img.setAttribute('draggable', true);
        img.addEventListener('dragstart', dragStart);
        img.addEventListener('dragend', dragEnd);
  
        document.getElementById('workspace').appendChild(img);
      }
      reader.readAsDataURL(file);
    }
  
    // Función para agregar un botón personalizado
    function addButton() {
      const text = document.getElementById('btnText').value || 'Botón';
      const color = document.getElementById('btnColor').value;
      const width = document.getElementById('btnWidth').value;
      const height = document.getElementById('btnHeight').value;
      const link = document.getElementById('btnLink').value;
      const animation = document.getElementById('btnAnimation').value;
      
      const btn = document.createElement('a');
      btn.innerText = text;
      btn.href = link || '#';
      btn.style.display = 'inline-block';
      btn.style.backgroundColor = color;
      btn.style.width = width + 'px';
      btn.style.height = height + 'px';
      btn.style.lineHeight = height + 'px';
      btn.style.textAlign = 'center';
      btn.style.position = 'absolute';
      btn.style.top = '100px';
      btn.style.left = '100px';
      btn.style.textDecoration = 'none';
      btn.style.color = '#fff';
      btn.classList.add('element', 'custom-button');
      if (animation) {
        btn.style.animation = animation + ' 2s infinite';
      }
      btn.setAttribute('draggable', true);
      btn.addEventListener('dragstart', dragStart);
      btn.addEventListener('dragend', dragEnd);
  
      document.getElementById('workspace').appendChild(btn);
    }
  
    // Función para agregar un "cuaderno" (simulador) al espacio de trabajo
    function addNotebook() {
      const type = document.getElementById('notebookType').value;
      const notebook = document.createElement('div');
      notebook.classList.add('notebook');
      if(type === 'circular'){
        notebook.classList.add('circular');
      }
      notebook.innerHTML = '<p>Este es un cuaderno ' + (type === 'circular' ? 'circular' : 'cuadrado') + '.</p>';
      notebook.style.position = 'absolute';
      notebook.style.top = '150px';
      notebook.style.left = '150px';
      notebook.setAttribute('draggable', true);
      notebook.addEventListener('dragstart', dragStart);
      notebook.addEventListener('dragend', dragEnd);
      document.getElementById('workspace').appendChild(notebook);
    }
  
    // Funciones básicas de arrastrar y soltar
    let offsetX, offsetY;
    function dragStart(e) {
      offsetX = e.offsetX;
      offsetY = e.offsetY;
    }
    function dragEnd(e) {
      e.target.style.left = (e.pageX - offsetX) + 'px';
      e.target.style.top = (e.pageY - offsetY) + 'px';
    }
  
    // Manejo del modal de edición de imagen
    function openImageModal() {
      document.getElementById('imageModal').classList.remove('hidden');
    }
    function closeImageModal() {
      document.getElementById('imageModal').classList.add('hidden');
    }
    function applyImageEdits() {
      if (currentImageElement) {
        const scale = document.getElementById('imgScale').value;
        const rotate = document.getElementById('imgRotate').value;
        const filter = document.getElementById('imgFilter').value;
        currentImageElement.style.transform = 'scale(' + scale + ') rotate(' + rotate + 'deg)';
        currentImageElement.style.filter = filter;
        closeImageModal();
      }
    }
  
    // Generador de código: recopila el contenido del espacio de trabajo y muestra ejemplos de HTML, CSS y JS
    function generateCode() {
      const workspaceContent = document.getElementById('workspace').innerHTML;
      const htmlCode = `<!DOCTYPE html>
<html>
<head>
  <title>Mi Sitio Web</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  ${workspaceContent}
  <script src="script.js"><\/script>
</body>
</html>`;
      // Se obtienen el CSS y JS actuales (en un proyecto real podrías generar archivos separados)
      const cssCode = document.querySelector('style').innerHTML;
      const jsCode = document.querySelector('script').innerHTML;
  
      document.getElementById('codeHtml').innerText = htmlCode;
      document.getElementById('codeCss').innerText = cssCode;
      document.getElementById('codeJs').innerText = jsCode;
  
      document.getElementById('codeModal').classList.remove('hidden');
    }
    function closeCodeModal() {
      document.getElementById('codeModal').classList.add('hidden');
    }
  </script>
</body>
</html>
